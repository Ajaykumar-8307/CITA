"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5041],{58538:function(e,t,a){var s=a(45610),r=a(9),n=a(50044),i=a(57437),l=a(2265),o=a(82549),d=a(64891),c=a(9883),u=a(86264),m=a(4392),f=a(27419),x=a(26801),h=a(97025),p=a(76340),g=a(72319),v=a(46615),y=a(46095),b=a(91139),j=a(84161),w=a(82469);t.Z=function(e){var t,a=e.onClose,N=e.currentSeats,_=void 0===N?y.UR.MIN_SEATS:N,E=e.nextBillDate,S=e.seatsUsed,P=void 0===S?0:S,A=e.refetch,C=e.isYearly,I=void 0!==C&&C,D=(0,m.aC)().userInfo,T=(0,v.Z)().planChanged,R=(0,g.mU)(),F=(R.subscriptionEndsAt,R.subscriptionCancelledAt,R.isPaused),M=R.refetchSubscription,Y=(0,r._)((0,l.useState)(0),2),U=Y[0],k=Y[1],O=(0,r._)((0,l.useState)({show:!1}),2),G=O[0],L=O[1],Z=(0,r._)((0,l.useState)(!1),2),B=Z[0],z=Z[1],q=(0,r._)((0,l.useState)(I),2),J=q[0],H=q[1],X=(0,p.Z)().notify,W=(null==D?void 0:D.uxp39Variant)===w.ZC.UXP_39.VARIANT,V=(0,y.vO)(W),K=J?V.YEARLY_PRICE_PER_SEAT:V.MONTHLY_PRICE_PER_SEAT,Q=null==D?void 0:D.enterpriseId,$=(0,b.usePricing)().country,ee=(0,j.nl)(null==D?void 0:D.subscriptionPlanId,$),et=ee.symbol,ea=ee.stripeKey,es=J?y.Ez.YEARLY["".concat(ea,"_468")]||y.Ez.YEARLY.USD_468:y.Ez.MONTHLY["".concat(ea,"_39")]||y.Ez.MONTHLY.USD_39,er=(0,r._)((0,f.ZU)(),1)[0],en=_-U,handleError=function(e){var t=h.gZ.parseErrorMessage(e),a=t.code,s=t.message,r=h.gZ.handleError(a,s);L({show:!0,code:r.code,message:r.message,action:r.action})},handleSeatRemove=function(e){var t=U+e;t<=_-y.UR.MIN_SEATS&&k(t)},ei=(t=(0,s._)(function(){var e,t,s;return(0,n.Jh)(this,function(r){switch(r.label){case 0:if(0===U&&I===J)return handleError("Please select members or empty seats to remove or change payment frequency"),[2];if((e=_-U)<y.UR.MIN_SEATS)return handleError("Team plan requires minimum ".concat(y.UR.MIN_SEATS," seats")),[2];if(F)return X({message:"Your subscription is paused. You will be able to subscribe again on the next billing date.",type:"info"}),[2];if(T)return X({message:"You have a pending downgrade. Please wait for it to complete before downgrading again.",type:"info"}),[2];z(!0),L({show:!1}),r.label=1;case 1:return r.trys.push([1,5,6,7]),[4,er({adminEmail:null==D?void 0:D.email,priceId:es,teamPlanId:Q,newSeats:e,isYearly:J}).unwrap()];case 2:if("success"!==r.sent().status)return[3,4];return[4,M()];case 3:r.sent(),a(),A(),r.label=4;case 4:return[3,7];case 5:return console.error("Error scheduling team plan downgrade:",t=r.sent()),handleError((null==t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to schedule downgrade"),[3,7];case 6:return z(!1),[7];case 7:return[2]}})}),function(){return t.apply(this,arguments)});return(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,i.jsxs)("div",{className:"w-full bg-white shadow-[0px_4px_14px_rgba(0,0,0,0.16)] overflow-hidden rounded-lg flex flex-col justify-start items-center max-w-2xl",children:[(0,i.jsxs)("div",{className:"w-full p-6 border-b border-[rgba(186,186,191,0.30)] flex justify-start items-center gap-4",children:[(0,i.jsx)("div",{className:"flex-1 text-[#303034] text-xl font-semibold leading-7 font-inter",children:"Manage & Downgrade Seats"}),(0,i.jsx)("button",{onClick:a,className:"w-5 h-5 flex items-center justify-center cursor-pointer border-none bg-transparent",children:(0,i.jsx)(o.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,i.jsx)("div",{className:"w-full pt-[23px] pb-[23px] flex flex-col justify-start items-start gap-6 max-h-[75vh] overflow-y-auto",children:(0,i.jsxs)("div",{className:"w-full px-6 flex flex-col justify-start items-start gap-6",children:[G.show&&(0,i.jsx)(x.Z,{error:G,onDismiss:function(){L({show:!1})},className:"w-full"}),(0,i.jsx)("div",{className:"w-full p-4 bg-[#F8F8F8] rounded-lg flex flex-col justify-start items-start gap-[11px]",children:(0,i.jsxs)("div",{className:"w-full flex justify-start items-start gap-2",children:[(0,i.jsxs)("div",{className:"flex-1 flex flex-col justify-start items-start gap-0.5",children:[(0,i.jsx)("div",{className:"w-full h-[22px] text-[#606067] text-sm font-medium leading-5 font-inter",children:"Current Seats"}),(0,i.jsxs)("div",{className:"h-8",children:[(0,i.jsx)("span",{className:"text-[#1F2937] text-2xl font-bold leading-8 font-inter",children:P}),(0,i.jsxs)("span",{className:"text-[#606067] text-base font-normal leading-8 font-inter",children:[" ","/ ",_," total"]})]})]}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col justify-start items-end gap-0.5",children:[(0,i.jsx)("div",{className:"w-full h-[22px] text-right text-[#606067] text-sm font-medium leading-5 font-inter",children:"Available"}),(0,i.jsxs)("div",{className:"h-8 text-right text-[#28A745] text-2xl font-bold leading-8 font-inter",children:[_-P," seats"]})]})]})}),(0,i.jsxs)("div",{className:"w-full flex flex-col justify-start items-start gap-2",children:[(0,i.jsxs)("div",{className:"w-full flex justify-start items-center gap-2",children:[(0,i.jsx)("div",{className:"flex-1 text-[#303034] text-base font-semibold leading-6 font-inter",children:"How many seats do you want to remove?"}),(0,i.jsxs)("div",{className:"text-[#606067] text-xs font-normal leading-4 font-inter",children:["Min Limit ",y.UR.MIN_SEATS," seats"]})]}),(0,i.jsxs)("div",{className:"w-full h-15 px-3 py-2 bg-gray-50 rounded-lg border border-gray-200 flex justify-center items-center gap-2.5",children:[(0,i.jsx)("button",{onClick:function(){return handleSeatRemove(-1)},disabled:U<=0,className:"p-3 bg-white rounded-lg border border-gray-200 flex justify-start items-center gap-2.5 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:(0,i.jsx)(d.Z,{className:"w-4 h-4 text-gray-800"})}),(0,i.jsx)("div",{className:"flex-1 text-center text-gray-800 text-2xl font-semibold",children:U}),(0,i.jsx)("button",{onClick:function(){return handleSeatRemove(1)},disabled:U>=_-y.UR.MIN_SEATS,className:"p-3 bg-white rounded-lg border border-gray-200 flex justify-start items-center gap-2.5 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:(0,i.jsx)(c.Z,{className:"w-4 h-4 text-gray-800"})})]})]}),(0,i.jsx)("div",{className:"w-full h-px border border-[#E8E8EA]"}),(0,i.jsxs)("div",{className:"w-full flex flex-col justify-start items-start gap-4",children:[(0,i.jsxs)("div",{className:"w-full flex justify-start items-center gap-6",children:[(0,i.jsx)("div",{className:"text-[#606067] text-sm font-normal leading-5 font-inter",children:"Total seats plan"}),(0,i.jsxs)("div",{className:"flex-1 text-right",children:[(0,i.jsxs)("span",{className:"text-[#303034] text-sm font-semibold leading-5 font-inter",children:[_," "]}),(0,i.jsx)("span",{className:"text-[#606067] text-sm font-normal leading-5 font-inter",children:"seats"})]})]}),(0,i.jsxs)("div",{className:"w-full flex justify-start items-center gap-6",children:[(0,i.jsx)("div",{className:"text-[#606067] text-sm font-normal leading-5 font-inter",children:"Seats remaining after downgrade"}),(0,i.jsxs)("div",{className:"flex-1 text-right",children:[(0,i.jsxs)("span",{className:"text-[#303034] text-sm font-semibold leading-5 font-inter",children:[en," "]}),(0,i.jsx)("span",{className:"text-[#606067] text-sm font-normal leading-5 font-inter",children:"seats"})]})]}),(0,i.jsxs)("div",{className:"w-full flex justify-start items-center gap-6",children:[(0,i.jsx)("div",{className:"text-[#606067] text-sm font-normal leading-5 font-inter",children:"Next bill date"}),(0,i.jsx)("div",{className:"flex-1 text-right text-[#303034] text-sm font-semibold leading-5 font-inter",children:void 0===E?"Sep 12, 2025":E})]}),(0,i.jsxs)("div",{className:"w-full flex justify-start items-center gap-6",children:[(0,i.jsx)("div",{className:"text-[#606067] text-sm font-normal leading-5 font-inter",children:"Price per seat"}),(0,i.jsxs)("div",{className:"flex-1 text-right",children:[(0,i.jsxs)("span",{className:"text-[#303034] text-sm font-semibold leading-5 font-inter",children:[et,J?V.YEARLY_PRICE_PER_SEAT:V.MONTHLY_PRICE_PER_SEAT," "]}),(0,i.jsxs)("span",{className:"text-[#606067] text-sm font-normal leading-5 font-inter",children:["/ ",J?"year":"month"]})]})]}),(0,i.jsxs)("div",{className:"w-full h-full justify-start items-start gap-2 inline-flex",children:[(0,i.jsx)("div",{onClick:function(){H(!1)},className:"flex-1 p-3 rounded-lg outline outline-1 outline-offset-[-1px] justify-start items-center gap-6 flex cursor-pointer transition-all hover:bg-gray-50 ".concat(J?"outline-[#E8E8EA]":"outline-[#3F20FB]"),children:(0,i.jsxs)("div",{className:"flex-1 justify-start items-start gap-2 flex",children:[J?(0,i.jsx)("div",{className:"w-5 h-5 rounded-full border border-[#E8E8EA]"}):(0,i.jsxs)("div",{className:"w-5 h-5 relative",children:[(0,i.jsx)("div",{className:"w-5 h-5 absolute left-0 top-0 bg-[#3F20FB] rounded-full"}),(0,i.jsx)("div",{className:"w-2.5 h-2.5 absolute left-[5px] top-[5px] bg-white rounded-full"})]}),(0,i.jsxs)("div",{className:"flex-1 flex-col justify-center items-start inline-flex",children:[(0,i.jsxs)("span",{className:"text-[#303034] text-base font-semibold leading-6 font-inter",children:[et,(en*V.MONTHLY_PRICE_PER_SEAT).toFixed(2),(0,i.jsx)("span",{className:"text-[#BABABF] text-base font-normal leading-5 font-inter ",children:"/ month"})]}),(0,i.jsx)("span",{className:"text-[#606067] text-sm font-normal leading-5 font-inter",children:"Billed Monthly"})]})]})}),(0,i.jsxs)("div",{onClick:function(){H(!0)},className:"flex-1 p-3 rounded-lg outline outline-1 outline-offset-[-1px] justify-start items-center gap-6 flex cursor-pointer transition-all hover:bg-gray-50 ".concat(J?"outline-[#3F20FB]":"outline-[#E8E8EA]"),children:[(0,i.jsxs)("div",{className:"flex-1 justify-start items-start gap-2 flex",children:[J?(0,i.jsxs)("div",{className:"w-5 h-5 relative",children:[(0,i.jsx)("div",{className:"w-5 h-5 absolute left-0 top-0 bg-[#3F20FB] rounded-full"}),(0,i.jsx)("div",{className:"w-2.5 h-2.5 absolute left-[5px] top-[5px] bg-white rounded-full"})]}):(0,i.jsx)("div",{className:"w-5 h-5 rounded-full border border-[#E8E8EA]"}),(0,i.jsxs)("div",{className:"flex-1 flex-col justify-center items-start inline-flex",children:[(0,i.jsxs)("span",{className:"text-[#303034] text-base font-semibold leading-6 font-inter",children:[et,(en*V.YEARLY_PRICE_PER_SEAT/12).toFixed(2),(0,i.jsx)("span",{className:"text-[#BABABF] text-base font-normal leading-5 font-inter",children:"/ month"})]}),(0,i.jsx)("span",{className:"text-[#606067] text-sm font-normal leading-5 font-inter",children:"Billed Yearly"})]})]}),(0,i.jsx)("div",{className:"px-2 py-1 bg-[#D5F3A7] rounded-[23px] justify-center items-center gap-2.5 flex",children:(0,i.jsx)("div",{className:"text-[#125F06] text-xs font-semibold leading-4 font-inter",children:"Save 20%"})})]})]})]}),(0,i.jsx)("div",{className:"w-full h-px border border-[#E8E8EA]"}),(0,i.jsxs)("div",{className:"w-full flex justify-center items-center gap-6",children:[(0,i.jsx)("div",{className:"flex-1 text-[#303034] text-base font-semibold leading-6 font-inter",children:"Next billing amount"}),(0,i.jsxs)("div",{className:"w-[129px] h-9 text-right text-[#303034] text-2xl font-bold leading-9 font-inter",children:[et,(en*K).toFixed(2)]})]})]})}),(0,i.jsxs)("div",{className:"w-full px-6 py-4 flex justify-center items-center gap-[10px]",children:[(0,i.jsx)("div",{className:"flex-1 flex justify-center flex-col text-[#48484D] text-sm font-normal leading-5 font-inter",children:"Seat changes apply at the next billing cycle."}),(0,i.jsxs)("button",{onClick:ei,disabled:0===U&&I===J||B,className:"px-3 py-2 rounded-[25px] flex justify-end items-center gap-1 transition-colors flex items-center gap-2 ".concat(0===U&&I===J||B?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[#DC3545] hover:bg-red-700 text-white"),children:[B&&(0,i.jsx)(u.Z,{className:"w-4 h-4 animate-spin"}),(0,i.jsx)("div",{className:"flex justify-center flex-col text-white text-sm font-semibold font-inter",children:B?"Confirming changes...":"Confirm updates"})]})]})]})})}},99431:function(e,t,a){var s=a(45610),r=a(9),n=a(50044),i=a(57437),l=a(2265),o=a(82549),d=a(86264),c=a(4392),u=a(27419),m=a(26801),f=a(97025);a(84638);var x=a(46095);t.Z=function(e){var t,a=e.teamInvite,h=e.onClose,p=(0,c.aC)(),g=p.userInfo,v=p.refetch,y=(0,r._)((0,l.useState)({show:!1}),2),b=y[0],j=y[1],w=(0,r._)((0,u.sE)(),2),N=w[0],_=w[1].isLoading,E=(null==a?void 0:a.planType)===x.FD.ENTERPRISE,handleError=function(e){var t=f.gZ.parseErrorMessage(e),a=t.code,s=t.message,r=f.gZ.handleError(a,s);j({show:!0,code:r.code,message:r.message,action:r.action})},S=(t=(0,s._)(function(){var e,t,s;return(0,n.Jh)(this,function(r){switch(r.label){case 0:if(!(null==a?void 0:a.teamPlanId)||!(null==g?void 0:g.email))return handleError("Invalid invitation data"),[2];j({show:!1}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,N({email:g.email,teamPlanId:a.teamPlanId}).unwrap()];case 2:return"success"===(e=r.sent()).status?(v(),h()):handleError(e.message||"Failed to accept invitation"),[3,4];case 3:return console.error("Error accepting team invitation:",t=r.sent()),handleError((null==t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to accept invitation. Please try again."),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,i.jsx)("div",{className:"fixed inset-0 z-100 flex items-center justify-center bg-black bg-opacity-50",style:{zIndex:9999},children:(0,i.jsxs)("div",{className:"w-full max-w-xl bg-white shadow-lg overflow-hidden rounded-lg",children:[(0,i.jsxs)("div",{className:"w-full h-19 px-6 py-6 border-b border-gray-200 flex justify-between items-center",children:[(0,i.jsx)("div",{className:"text-gray-800 text-xl font-semibold leading-7",children:"Confirm Membership"}),(0,i.jsx)("button",{onClick:h,className:"w-5 h-5 flex items-center justify-center cursor-pointer border-none bg-transparent",children:(0,i.jsx)(o.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,i.jsxs)("div",{className:"w-full px-4 py-4 flex flex-col gap-8",children:[b.show&&(0,i.jsx)(m.Z,{error:b,onDismiss:function(){j({show:!1})},className:"w-full"}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("p",{className:"text-gray-800 text-base font-medium leading-6 mb-2",children:["By accepting the ",E?"Enterprise":"team"," invitation, you'll gain access to all Pro features."]}),(0,i.jsx)("p",{className:"text-gray-800 text-base font-normal leading-6",children:"Your personal plan will be put on hold, and your credits will remain available if you downgrade."})]}),(0,i.jsx)("div",{className:"w-full flex justify-end",children:(0,i.jsxs)("button",{onClick:S,disabled:_,className:"px-3 py-2 text-sm font-semibold rounded-full transition-colors flex items-center gap-2 ".concat(_?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white"),children:[_&&(0,i.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}),_?"Accepting...":"Accept & Continue"]})})]})]})})}},84638:function(e,t,a){var s=a(57437);a(2265);var r=a(13682),n=a(82549),i=a(46095);t.Z=function(e){var t,a=e.teamInvite,l=e.onClose,o=(null==a?void 0:a.planType)===i.FD.ENTERPRISE;return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"w-full max-w-xl bg-white shadow-lg overflow-hidden rounded-lg",children:[(0,s.jsxs)("div",{className:"w-full h-19 px-6 py-6 border-b border-gray-200 flex justify-between items-center",children:[(0,s.jsx)("div",{className:"text-gray-800 text-xl font-semibold leading-7",children:"Invitation Accepted"}),(0,s.jsx)("button",{onClick:l,className:"w-5 h-5 flex items-center justify-center cursor-pointer border-none bg-transparent",children:(0,s.jsx)(n.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,s.jsx)("div",{className:"w-full px-6 py-6 flex flex-col gap-8",children:(0,s.jsxs)("div",{className:"w-full flex flex-col justify-center items-center gap-6",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col justify-start items-center gap-2",children:[(0,s.jsxs)("div",{className:"w-full text-center",children:[(0,s.jsxs)("span",{className:"text-gray-800 text-lg font-medium leading-7",children:["You're now a ",o?"Enterprise":"team"," member of"," "]}),(0,s.jsx)("span",{className:"text-gray-800 text-lg font-bold leading-7",children:null==a?void 0:a.teamPlanName})]}),(0,s.jsxs)("div",{className:"w-full text-center text-gray-600 text-base font-normal leading-6",children:["Your admin oversees your activities here, you can share your explorations with your",o?" enterprise members":" team members"," in one place."]})]}),(0,s.jsx)("div",{className:"w-full flex flex-col justify-center items-center gap-2",children:(0,s.jsxs)("div",{className:"w-full flex flex-col justify-start items-center gap-2",children:[(0,s.jsx)("div",{className:"text-gray-800 text-sm font-normal leading-5",children:"New Credits:"}),(0,s.jsx)("div",{className:"w-full h-8 relative flex justify-center",children:(0,s.jsxs)("div",{className:"px-3 py-2 bg-indigo-50 rounded-full flex justify-start items-center gap-1.5",children:[(0,s.jsx)(r.Z,{width:18,height:18}),(0,s.jsx)("div",{className:"flex justify-start items-center gap-1",children:(0,s.jsx)("div",{className:"text-center text-indigo-600 text-sm font-semibold",children:null==a?void 0:null===(t=a.teamPlanDetails)||void 0===t?void 0:t.availableCredits.toLocaleString()})})]})})]})})]})})]})})}},39753:function(e,t,a){a.d(t,{bz:function(){return modals_AddSeatsModal},fd:function(){return modals_DeleteConfirmationModal},U8:function(){return l.Z},Ff:function(){return A.Z}});var s=a(57437),r=a(82549),n=a(16691),i=a.n(n);function Avatar(e){var t=e.src,a=e.alt,r=e.fallback,n=e.className;return(0,s.jsx)("div",{className:"relative flex items-center justify-center h-8 w-8 shrink-0 overflow-hidden rounded-full bg-gray-200 ".concat(n),children:t?(0,s.jsx)(i(),{width:32,height:32,src:t,alt:a,className:"h-full w-full object-cover"}):(0,s.jsx)("span",{className:"flex items-center justify-center text-sm font-medium text-gray-500",children:r})})}var modals_DeleteConfirmationModal=function(e){var t=e.memberToDelete,a=e.cancelDeleteMember,n=e.confirmDeleteMember,i=e.onManagePlan,l=e.members,o=e.removingMember,d=(void 0===l?[]:l).filter(function(e){return t.includes(e.email)});return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"w-full bg-white shadow-[0px_4px_14px_rgba(0,0,0,0.16)] overflow-hidden rounded-lg flex flex-col justify-start items-center max-w-xl",children:[(0,s.jsxs)("div",{className:"w-full h-19 p-6 border-b border-[rgba(186,186,191,0.30)] flex justify-start items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-1 text-[#303034] text-xl font-semibold leading-7",children:"Remove Members"}),(0,s.jsx)("button",{onClick:a,className:"w-5 h-5 flex items-center justify-center cursor-pointer border-none bg-transparent",children:(0,s.jsx)(r.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,s.jsx)("div",{className:"w-full py-6 flex flex-col justify-start items-start gap-8",children:(0,s.jsxs)("div",{className:"w-full px-6 flex flex-col justify-center items-start gap-6",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("span",{className:"text-[#303034] text-base font-normal leading-6 break-words",children:["You're about to remove the following members from your team."," ",i?(0,s.jsxs)(s.Fragment,{children:["This action won't change the number of seats included in your team. If you wish to downgrade, go to"," ",(0,s.jsx)("button",{onClick:i,className:"text-[#3F20FB] text-base font-semibold underline leading-6 cursor-pointer hover:text-[#2A1BC7] transition-colors",children:"Manage Seats."})]}):"Removed members will revert to the free plan."]})}),(0,s.jsx)("div",{className:"w-full max-w-[582px] max-h-[200px] overflow-y-auto flex flex-col justify-start items-start gap-2",children:d.map(function(e,t){return(0,s.jsxs)("div",{className:"w-full h-[34px] py-1 flex justify-start items-center gap-2.5",children:[(0,s.jsx)(Avatar,{src:e.avatar,alt:e.displayName||e.email,fallback:(e.displayName||e.email)[0].toUpperCase()}),(0,s.jsx)("div",{className:"flex-1 flex justify-center flex-col text-[#303034] text-sm font-medium leading-5 break-words",children:e.displayName||e.email}),(0,s.jsx)("div",{className:"flex-1 text-right flex justify-center flex-col text-[#606067] text-sm font-medium leading-5 break-words",children:e.email})]},e.email)})}),(0,s.jsxs)("div",{className:"w-full flex justify-end items-center gap-6",children:[(0,s.jsx)("button",{onClick:a,className:"px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:"Cancel"}),(0,s.jsx)("button",{disabled:o,onClick:n,className:"px-3 py-2 bg-[#DC3545] hover:bg-[#C82333] text-white text-sm font-semibold rounded-[20px] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Removing...":"Remove Members"})]})]})})]})})},l=a(58538),o=a(45610),d=a(9),c=a(50044),u=a(2265),m=a(64891),f=a(9883),x=a(86264),h=a(4392),p=a(27419),g=a(26801),v=a(97025),y=a(72319),b=a(76340),j=a(46615),w=a(46095),N=a(91139),_=a(84161),E=a(79398),S=a(96974),P=a(82826),modals_AddSeatsModal=function(e){var t,a=e.onClose,n=e.currentSeats,i=void 0===n?15:n,l=e.pricePerSeat,A=void 0===l?w.DT.MONTHLY_PRICE_PER_SEAT:l,C=e.nextBillDate,I=e.availableSeats,D=void 0===I?0:I,T=e.showManagePlanModal,R=e.isYearly,F=void 0!==R&&R,M=(0,h.aC)().userInfo;(0,j.Z)().planChanged;var Y=(0,y.mU)(),U=(Y.subscriptionEndsAt,Y.subscriptionCancelledAt,Y.isPaused),k=(0,b.Z)().notify,O=(0,S.useStripe)(),G=(0,d._)((0,u.useState)(0),2),L=G[0],Z=G[1],B=(0,d._)((0,u.useState)({show:!1}),2),z=B[0],q=B[1],J=(0,d._)((0,u.useState)(!1),2),H=J[0],X=J[1],W=(0,E.z)().capture,V=null==M?void 0:M.enterpriseId,K=(0,N.usePricing)().country,Q=(0,_.nl)(null==M?void 0:M.subscriptionPlanId,K).symbol,$=(0,d._)((0,p.db)(),1)[0],ee=(0,p.yY)({teamPlanId:V,adminEmail:null==M?void 0:M.email},{skip:!V||!(null==M?void 0:M.email)}).refetch,et=i+L,ea=L*A,handleSeatChange=function(e){var t=L+e;t<=w.UR.MAX_SEATS-i&&Z(t)},handleError=function(e){var t=v.gZ.parseErrorMessage(e),a=t.code,s=t.message,r=v.gZ.handleError(a,s);q({show:!0,code:r.code,message:r.message,action:r.action})},es=(t=(0,o._)(function(){var e,t,s,r,n,l,d,u,m,f,x,h,p,g,v,y,b,j,N,_,E,S,A;return(0,c.Jh)(this,function(C){switch(C.label){case 0:if(L<=0)return handleError("Please select seats to add"),[2];if(et>w.UR.MAX_SEATS)return handleError("Maximum ".concat(w.UR.MAX_SEATS," seats allowed per team")),[2];if(U)return k({message:"Your subscription is paused. You will be able to subscribe again on the next billing date.",type:"info"}),[2];X(!0),q({show:!1}),W(w.Je.TEAM_PLAN_ADD_SEATS_STARTED,{user_id:null==M?void 0:M.uid,user_email:null==M?void 0:M.email,seats_to_add:L,new_total_seats:et,current_seats:i,amount_payable:ea,is_yearly:F,team_plan_id:V}),C.label=1;case 1:return C.trys.push([1,6,7,8]),[4,$({adminEmail:null==M?void 0:M.email,teamPlanId:V,priceId:null==M?void 0:M.subscriptionPlanId,isYearly:F,newSeats:et}).unwrap()];case 2:if(v={success:"success"===(g=C.sent()).status,status:g.status,requiresAction:(null===(t=g.data)||void 0===t?void 0:null===(e=t.subscription)||void 0===e?void 0:e.requiresAction)||!1,paymentIntentClientSecret:(null===(r=g.data)||void 0===r?void 0:null===(s=r.subscription)||void 0===s?void 0:s.paymentIntentClientSecret)||null,paymentIntentStatus:(null===(l=g.data)||void 0===l?void 0:null===(n=l.subscription)||void 0===n?void 0:n.paymentIntentStatus)||null,latestInvoiceId:(null===(u=g.data)||void 0===u?void 0:null===(d=u.subscription)||void 0===d?void 0:d.latestInvoiceId)||null,subscriptionId:(null===(f=g.data)||void 0===f?void 0:null===(m=f.subscription)||void 0===m?void 0:m.stripeSubscriptionId)||"",message:g.message,data:{teamPlanId:null===(x=g.data)||void 0===x?void 0:x.teamPlanId,upgrade:null===(h=g.data)||void 0===h?void 0:h.upgrade,subscription:null===(p=g.data)||void 0===p?void 0:p.subscription}},b=(y=(0,P.Kf)(v)).clientSecret,!((j=y.requiresAction)&&b))return[3,4];return console.info("Authenticating payment...",j,b),[4,(0,P.fv)(b,O,null==M?void 0:M.email)];case 3:if(!(N=C.sent()).success)return W(w.Je.TEAM_PLAN_ADD_SEATS_FAILED,{user_id:null==M?void 0:M.uid,user_email:null==M?void 0:M.email,seats_to_add:L,error:N.error||"Payment authentication failed",team_plan_id:V}),handleError(N.error||"Payment authentication failed"),[2];C.label=4;case 4:var I,D;return[4,(0,P.c5)(v,{fetchSubscriptionStatus:(I=(0,o._)(function(e){var t,a,s,r;return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,ee()];case 1:return[2,(null==(r=e.sent())?void 0:null===(s=r.data)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:null===(t=a.teamPlan)||void 0===t?void 0:t.status)==="active"?{status:"active"}:null]}})}),function(e){return I.apply(this,arguments)}),fetchTeamPlanStatus:(D=(0,o._)(function(e){var t,a,s;return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,ee()];case 1:return[2,null==(s=e.sent())?void 0:null===(a=s.data)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.teamPlan]}})}),function(e){return D.apply(this,arguments)}),onProgress:function(e){console.info("Processing upgrade...",e)}})];case 5:return(_=C.sent()).success&&!_.pending?(W(w.Je.TEAM_PLAN_ADD_SEATS_COMPLETED,{user_id:null==M?void 0:M.uid,user_email:null==M?void 0:M.email,seats_added:L,new_total_seats:et,amount_payable:ea,is_yearly:F,team_plan_id:V}),k({message:"Seats added successfully!",type:"success"}),a()):_.pending?console.info("Processing upgrade...",_.pending):handleError(_.error||"Failed to confirm upgrade"),[3,8];case 6:return console.error("Error upgrading team plan:",E=C.sent()),W(w.Je.TEAM_PLAN_ADD_SEATS_FAILED,{user_id:null==M?void 0:M.uid,user_email:null==M?void 0:M.email,seats_to_add:L,error:(null==E?void 0:null===(S=E.data)||void 0===S?void 0:S.message)||(null==E?void 0:E.message),team_plan_id:V}),(null==(A=(null==E?void 0:E.data)||E)?void 0:A.requiresAction)&&(null==A?void 0:A.paymentIntentClientSecret)?handleError("Payment authentication required. Please try again."):handleError((null==A?void 0:A.message)||"Failed to upgrade team plan"),[3,8];case 7:return X(!1),[7];case 8:return[2]}})}),function(){return t.apply(this,arguments)});return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"w-full bg-white shadow-lg overflow-hidden rounded-lg flex flex-col justify-start items-center max-w-2xl",children:[(0,s.jsxs)("div",{className:"w-full p-6 border-b border-gray-200 flex justify-start items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-1 text-gray-800 text-xl font-semibold leading-7",children:"Add more seats"}),(0,s.jsx)("button",{onClick:a,className:"w-5 h-5 flex items-center justify-center cursor-pointer border-none bg-transparent",children:(0,s.jsx)(r.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,s.jsx)("div",{className:"w-full py-6 flex flex-col justify-start items-start gap-8 overflow-y-auto",children:(0,s.jsxs)("div",{className:"w-full px-6 flex flex-col justify-center items-start gap-6",children:[z.show&&(0,s.jsx)(g.Z,{error:z,onDismiss:function(){q({show:!1})},className:"w-full"}),(0,s.jsxs)("div",{className:"w-full p-4 bg-gray-50 rounded-lg border border-gray-200 flex flex-col justify-start items-start gap-3",children:[(0,s.jsxs)("div",{className:"w-full flex justify-start items-start gap-2",children:[(0,s.jsxs)("div",{className:"flex-1 flex flex-col justify-start items-start gap-0.5",children:[(0,s.jsx)("div",{className:"w-full h-5.5 text-gray-600 text-sm font-medium leading-5",children:"Current Seats"}),(0,s.jsxs)("div",{className:"w-26 h-8",children:[(0,s.jsx)("span",{className:"text-gray-800 text-2xl font-bold leading-8",children:i-D}),(0,s.jsxs)("span",{className:"text-gray-600 text-base font-normal leading-8",children:[" ","/ ",i," total"]})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col justify-start items-end gap-0.5",children:[(0,s.jsx)("div",{className:"w-full h-5.5 text-right text-gray-600 text-sm font-medium leading-5",children:"Available"}),(0,s.jsxs)("div",{className:"w-25 h-8 text-right text-green-600 text-2xl font-bold leading-8",children:[D," seats"]})]})]}),(0,s.jsx)("div",{className:"w-full h-px bg-gray-200"}),(0,s.jsxs)("div",{className:"w-full text-center",children:[(0,s.jsxs)("span",{className:"text-gray-700 text-xs font-normal leading-4",children:["Need to reduce seats?"," "]}),(0,s.jsx)("button",{onClick:function(){T(),a()},className:"text-indigo-600 text-xs font-semibold underline leading-4 cursor-pointer hover:text-indigo-700 transition-colors",children:"Manage Seats"})]})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col justify-start items-end gap-2",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col justify-start items-start gap-2",children:[(0,s.jsxs)("div",{className:"w-full flex justify-start items-center gap-2",children:[(0,s.jsx)("div",{className:"flex-1 text-gray-800 text-base font-semibold leading-6",children:"How many seats do you want to add?"}),(0,s.jsxs)("div",{className:"text-gray-600 text-xs font-normal leading-4",children:["Limit within ",w.UR.MIN_SEATS,"-",w.UR.MAX_SEATS," seats"]})]}),(0,s.jsxs)("div",{className:"w-full h-15 px-3 py-2 bg-gray-50 rounded-lg border border-gray-200 flex justify-center items-center gap-2.5",children:[(0,s.jsx)("button",{onClick:function(){return handleSeatChange(-1)},disabled:L<=0,className:"p-3 bg-white rounded-lg border border-gray-200 flex justify-start items-center gap-2.5 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:(0,s.jsx)(m.Z,{className:"w-4 h-4 text-gray-800"})}),(0,s.jsx)("div",{className:"flex-1 text-center text-gray-800 text-2xl font-semibold",children:L}),(0,s.jsx)("button",{onClick:function(){return handleSeatChange(1)},disabled:L>=w.UR.MAX_SEATS-i,className:"p-3 bg-white rounded-lg border border-gray-200 flex justify-start items-center gap-2.5 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:(0,s.jsx)(f.Z,{className:"w-4 h-4 text-gray-800"})})]})]}),(0,s.jsxs)("div",{className:"w-full text-right",children:[(0,s.jsxs)("span",{className:"text-gray-600 text-xs font-medium leading-4",children:["Need more seats?"," "]}),(0,s.jsx)("a",{href:"https://tally.so/r/wdVo9V",target:"_blank",rel:"noreferrer",className:"text-indigo-600 text-xs font-semibold underline leading-4 cursor-pointer hover:text-indigo-700 transition-colors",children:"Talk to sales"})]})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col justify-start items-start gap-4",children:[(0,s.jsxs)("div",{className:"w-full flex justify-start items-center gap-6",children:[(0,s.jsx)("div",{className:"text-gray-600 text-sm font-normal leading-5",children:"New total seats"}),(0,s.jsxs)("div",{className:"flex-1 text-right",children:[(0,s.jsxs)("span",{className:"text-gray-800 text-sm font-semibold leading-5",children:[et," "]}),(0,s.jsx)("span",{className:"text-gray-600 text-sm font-normal leading-5",children:"seats"})]})]}),(0,s.jsxs)("div",{className:"w-full flex justify-start items-center gap-6",children:[(0,s.jsx)("div",{className:"text-gray-600 text-sm font-normal leading-5",children:"Price per seat"}),(0,s.jsxs)("div",{className:"flex-1 text-right",children:[(0,s.jsxs)("span",{className:"text-gray-800 text-sm font-semibold leading-5",children:[Q,A.toFixed(2)," "]}),(0,s.jsxs)("span",{className:"text-gray-600 text-sm font-normal leading-5",children:["/ ",F?"year":"month"]})]})]}),(0,s.jsxs)("div",{className:"w-full flex justify-start items-center gap-6",children:[(0,s.jsx)("div",{className:"text-gray-600 text-sm font-normal leading-5",children:"Next billing date"}),(0,s.jsx)("div",{className:"flex-1 text-right text-gray-800 text-sm font-semibold leading-5",children:void 0===C?"Sep 12, 2025":C})]}),(0,s.jsxs)("div",{className:"w-full flex justify-start items-center gap-6",children:[(0,s.jsx)("div",{className:"text-gray-600 text-sm font-normal leading-5",children:"Next billing amount"}),(0,s.jsxs)("div",{className:"flex-1 text-right text-gray-800 text-sm font-semibold leading-5",children:[Q,(et*A).toFixed(2)]})]})]}),(0,s.jsx)("div",{className:"w-full h-px bg-gray-200"}),(0,s.jsxs)("div",{className:"w-full flex justify-center items-center gap-6",children:[(0,s.jsx)("div",{className:"flex-1 text-gray-800 text-base font-semibold leading-6",children:"Amount due today"}),(0,s.jsx)("div",{className:"w-32 h-9 text-right text-indigo-600 text-2xl font-bold leading-9",children:L>0?"".concat(Q).concat(ea.toFixed(2)):"".concat(Q,"0.00")})]}),(0,s.jsx)("div",{className:"w-full flex justify-end items-center gap-6",children:(0,s.jsxs)("button",{onClick:es,disabled:L<=0||H,className:"px-3 py-2 text-sm font-semibold rounded-full transition-colors flex items-center gap-2 ".concat(L<=0||H?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white"),children:[H&&(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}),H?"Processing...":"Confirm and Pay"]})})]})})]})})};a(99431);var A=a(84638)},30698:function(e,t,a){a.r(t),a.d(t,{ChangePlanModalContext:function(){return i},ChangePlanModalProvider:function(){return ChangePlanModalProvider},useChangePlanModal:function(){return useChangePlanModal}});var s=a(9),r=a(57437),n=a(2265),i=(0,n.createContext)(),ChangePlanModalProvider=function(e){var t=e.children,a=(0,s._)((0,n.useState)(!1),2),l=a[0],o=a[1],d=(0,s._)((0,n.useState)(!1),2),c=d[0],u=d[1];return(0,r.jsx)(i.Provider,{value:{isModalOpen:l,openModal:function(){o(!0)},closeModal:function(){o(!1),c&&u(!1)},isUpgradeFromBannerClicked:c,setIsUpgradeFromBannerClicked:u},children:t})},useChangePlanModal=function(){return(0,n.useContext)(i)}},25414:function(e,t,a){a.r(t),a.d(t,{ModalProvider:function(){return ModalProvider},useModal:function(){return useModal}});var s=a(9),r=a(57437),n=a(2265),i=a(4392),l=a(72319),o=a(46095),d=a(79398),c=(0,n.createContext)(),getFeatureMessage=function(e,t,a,s){if(s)return"Youâ€™re currently on a Free plan with the 7-day pro trial. Upgrade to standard or Pro to enjoy more credits and keep exploring everything UXP has to offer.";if(e===o.GY.ENTERPRISE_ACCESS_DISABLED)return"Your access to the platform has been revoked by your enterprise administrator. Please contact your IT team or administrator to restore access.";if(e===o.GY.ENTERPRISE_PLAN_DISABLED)return"Your enterprise plan is currently inactive. Please contact your administrator to reactivate the plan and restore access to all features.";if(t===o.FD.INACTIVE)return"Your don't have any active subscription. Upgrade to the a subscription to unlock credits and access more premium features.";if(t===o.FD.FREE&&e===o.GY.PROMOTION)return"Hey, I noticed you are using the free plan, Upgrade to the Standard or Pro plan to unlock some amazing features we have to offer.";if(t===o.FD.STANDARD&&e===o.GY.MAX_SCREENS)return"You've reached the max screen limit on the Standard plan. Upgrade to Pro for unlimited screens and uninterrupted creativity.";if(t===o.FD.FREE&&e===o.GY.ADD_PAGE)return"You've reached the 1 file limit on the Free plan. Upgrade to the Standard plan for 5 files or the Pro plan for unlimited files, and continue creating without restrictions.";if(t===o.FD.STANDARD&&e===o.GY.ADD_MORE_PAGES)return"You've reached the 5 file limit on the Standard plan. Upgrade to Pro for unlimited files and keep creating without restrictions.";if((t===o.FD.FREE||t===o.FD.STANDARD)&&e===o.GY.ATTACH_FILES_WITH_CONTEXT_FEATURE)return"Attaching files with context is a premium feature available exclusively on our Pro plan. Upgrade now to access this feature and enhance your workflow.";if("save-ui"===e||e===o.GY.LOW_CREDITS)return"You need more credits to continue (".concat(a.planCredits,"/").concat(a.totalCredits," remaining). ").concat(t===o.FD.FREE?"Upgrade to the Standard or Pro plan to receive monthly credits.":"Purchase additional credits or upgrade your plan for more credits.");switch(e){case o.GY.FLOWBITE:return"Flowbite is a premium feature available exclusively on our Pro plan. Upgrade now to access premium design components and enhance your workflow.";case o.GY.IMAGE_UPLOADER:return"Image uploading is a premium feature available exclusively on our Pro plan. Upgrade to Pro to upload your own images and create personalized designs.";case o.GY.REFERENCE_FEATURE:return"Reference selection is a premium feature available exclusively on our Standard and Pro plans. Upgrade to Standard or Pro to use reference and create personalized designs.";case o.GY.SECTION_EDIT:return"Section editing is a premium feature available exclusively on our Pro plan. Upgrade now to edit individual sections for pixel-perfect design control.";case o.GY.SCREEN_FLOW:return t===o.FD.FREE?"Screen flows are available with our Standard plan (up to 5 screens) or you can upgrade to Pro for unlimited flows.":"You've reached the 5 file limit on the Standard plan. Upgrade to Pro for unlimited screen flows.";case o.GY.EXPORT_TO_FIGMA:return"Exporting to Figma is a premium feature available on our Standard and Pro plans. Upgrade to Standard or Pro for a seamless design integration.";case o.GY.SOURCE_CODE:return"Accessing and exporting source code is a premium feature available on our Standard and Pro plans. Upgrade to Standard or Pro to accelerate your development.";case o.GY.SHARE_DESIGN:return"Sharing designs is a premium feature available on our Standard and Pro plans. Upgrade to Standard or Pro for a seamless design sharing experience.";case o.GY.SAVE_TO_FIGMA:return"Saving to Figma is a premium feature available on our Standard and Pro plans. Upgrade to Standard or Pro for a seamless design saving experience.";case o.GY.MAX_DESIGN:return"Max design is a premium feature available on our Pro plan. Upgrade to Pro to generate detailed designs.";case o.GY.COPY_DESIGN:return"Copying designs to Figma is a premium feature available on our Paid plan. Upgrade to Pro to seamlessly copy your designs to Figma.";case o.GY.CREDITS_PROMOTION:return t===o.FD.FREE?"You're currently on our Free plan, which doesn't support credit purchases. Upgrade to the Standard or Pro plan to unlock credits and access more premium features.":t===o.FD.STANDARD&&"Upgrade to our Pro plan, which includes 1,200 monthly credits and unlimited projects.";case o.GY.CUSTOM_MODEL:return"Custom model is a premium feature available on our Pro plan. Upgrade now to elevate your designs with more customization.";default:if((e?o.Ad.includes(e)?o.FD.PRO:o.UU.includes(e)?o.FD.STANDARD:null:null)===o.FD.PRO)return"This is a premium feature available exclusively on our Pro plan, which includes 1,200 monthly credits and unlimited projects. Upgrade to Standard or Pro to unlock it.";return"You're currently on our Free plan, which doesn't support credit purchases. Upgrade to the Standard or Pro plan to unlock credits and access more premium features."}};function useModal(){return(0,n.useContext)(c)}var ModalProvider=function(e){var t=e.children,a=(0,s._)((0,n.useState)(!1),2),u=a[0],m=a[1],f=(0,s._)((0,n.useState)(null),2),x=f[0],h=f[1],p=(0,i.aC)().googleUID,g=(0,l.mU)(),v=g.planType,y=g.counters,b=g.userInfo,j=g.hasActiveTrialAccess,w=(0,s._)((0,n.useState)(null),2),N=w[0],_=w[1],E=(0,s._)((0,n.useState)(""),2),S=E[0],P=E[1],A=(0,d.z)(),getModalTitle=function(e,t){if(void 0===e)return"";if("save-ui"===e||e===o.GY.LOW_CREDITS)return"Credits Required";if(e===o.GY.CREDITS_PROMOTION){if(t===o.FD.PRO)return"Buy Credits";if(t===o.FD.STANDARD)return"Upgrade to Pro"}return e===o.GY.PROMOTION||e===o.GY.FLOWBITE||e===o.GY.IMAGE_UPLOADER||e===o.GY.SECTION_EDIT||e===o.GY.CREDITS_PROMOTION||e===o.GY.CUSTOM_MODEL?"Upgrade to Pro":e===o.GY.ADD_MORE_PAGES?t===o.FD.STANDARD?"Upgrade to Pro":"Project Limit Reached":e===o.GY.MAX_SCREENS||e===o.GY.SAVE_TO_FIGMA||e===o.GY.SHARE_DESIGN||e===o.GY.SOURCE_CODE||e===o.GY.EXPORT_TO_FIGMA||e===o.GY.COPY_DESIGN?"Upgrade Your Plan":t===o.FD.STANDARD?"Upgrade to Pro":"Plan Detail"};return(0,r.jsx)(c.Provider,{value:{isOpen:u,type:x,message:N,modalTitle:S,openModal:function(e){m(!0),h(e);var t=getFeatureMessage(e,v,y,j);_(t),P(getModalTitle(e,v,b)),A.capture(o.Je.UPGRADE_MODAL_SHOWN,{distinct_id:p,feature_flag:e,user_id:p,modal_type:e,plan_type:v,message:t})},closeModal:function(){m(!1)}},children:t})}},82826:function(e,t,a){a.d(t,{Kf:function(){return extractPaymentIntent},c5:function(){return waitForWebhookConfirmation},fv:function(){return handle3DSecure}});var s=a(45610),r=a(41369),n=a(50044),i=a(27106);function handle3DSecure(e,t,a){return _handle3DSecure.apply(this,arguments)}function _handle3DSecure(){return(_handle3DSecure=(0,s._)(function(e,t,a){var s,l,o,d;return(0,n.Jh)(this,function(n){switch(n.label){case 0:if(t)return[3,2];return[4,(0,i.J)("pk_live_51Ng1Q3Fa1DYVihNz7yQ5AAiIUyqXhnGh02JFITxGh9iQFIS8BziNe0ehN0TYAcekilDDCveh5Gqo09PPlOkn0sSi00jJlg0MHz")];case 1:if(!(t=n.sent()))return[2,{success:!1,error:"Failed to initialize Stripe"}];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,t.confirmPayment({clientSecret:e,confirmParams:(0,r._)({},a&&{payment_method_data:{billing_details:{email:a}}}),redirect:"if_required"})];case 3:if(l=(s=n.sent()).error,o=s.paymentIntent,l)return[2,{success:!1,error:l.message||"Payment authentication failed"}];if((null==o?void 0:o.status)==="succeeded")return[2,{success:!0,paymentIntent:o}];if((null==o?void 0:o.status)==="requires_action")return[2,{success:!1,error:"Additional authentication still required. Please try again."}];return[2,{success:!0,paymentIntent:o}];case 4:return console.error("3D Secure error:",d=n.sent()),[2,{success:!1,error:d instanceof Error?d.message:"An error occurred during payment authentication"}];case 5:return[2]}})})).apply(this,arguments)}function waitForWebhookConfirmation(e){return _waitForWebhookConfirmation.apply(this,arguments)}function _waitForWebhookConfirmation(){return(_waitForWebhookConfirmation=(0,s._)(function(e){var t,a,r,i,l,o,d,c,u,m,f,x,h,p,g,v,y,b,j,w=arguments;return(0,n.Jh)(this,function(N){switch(N.label){case 0:l=(t=w.length>1&&void 0!==w[1]?w[1]:{}).fetchSubscriptionStatus,o=t.fetchTeamPlanStatus,d=t.fetchUserSubscription,c=t.onProgress,m=void 0===(u=t.maxAttempts)?30:u,x=void 0===(f=t.pollInterval)?1e3:f,h=e.subscriptionId,p=null===(a=e.data)||void 0===a?void 0:a.teamPlanId,g=null===(i=e.data)||void 0===i?void 0:null===(r=i.upgrade)||void 0===r?void 0:r.newSeats,c&&c("Processing your upgrade..."),N.label=1;case 1:N.trys.push([1,11,,12]),v=0,N.label=2;case 2:if(!(v<m))return[3,10];return[4,new Promise(function(e){return setTimeout(e,x)})];case 3:if(N.sent(),!l)return[3,9];return[4,l(h)];case 4:if(console.info("subscriptionData",y=N.sent()),(null==y?void 0:y.status)!=="active")return[3,9];if(!(p&&o))return[3,6];return[4,o(p)];case 5:if(console.info("teamPlanData",b=N.sent()),console.log("expectedNewSeats",g),g&&(null==b?void 0:b.seats)===g)return c&&c("Upgrade completed successfully!"),[2,{success:!0}];return[3,9];case 6:if(!d)return[3,8];return[4,d()];case 7:if(null==(j=N.sent())?void 0:j.subscriptionPlanId)return c&&c("Upgrade completed successfully!"),[2,{success:!0}];return[3,9];case 8:return c&&c("Upgrade completed successfully!"),[2,{success:!0}];case 9:return v++,[3,2];case 10:var _,E,S;return c&&c("Your upgrade is being processed. This may take a few moments. You'll receive a confirmation email when it's complete."),l&&(_=h,E=l,S=setInterval((0,s._)(function(){var e;return(0,n.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E(_)];case 1:return(null==(e=t.sent())?void 0:e.status)==="active"&&(clearInterval(S),window.dispatchEvent(new CustomEvent("subscription_changed")),window.dispatchEvent(new CustomEvent("userInfoData"))),[3,3];case 2:return console.error("Background polling error:",t.sent()),[3,3];case 3:return[2]}})}),5e3),setTimeout(function(){clearInterval(S)},3e5)),[2,{success:!0,pending:!0}];case 11:return console.error("Webhook confirmation error:",N.sent()),[2,{success:!1,error:"Confirmation timeout"}];case 12:return[2]}})})).apply(this,arguments)}function extractPaymentIntent(e){var t,a,s,r;return{clientSecret:e.paymentIntentClientSecret||(null===(a=e.data)||void 0===a?void 0:null===(t=a.subscription)||void 0===t?void 0:t.paymentIntentClientSecret)||null,requiresAction:e.requiresAction||(null===(r=e.data)||void 0===r?void 0:null===(s=r.subscription)||void 0===s?void 0:s.requiresAction)||!1}}},47635:function(e,t,a){a.d(t,{V:function(){return redirectToCheckout},q:function(){return addParamToStripePayload}});var s=a(41369),r=a(43654);function redirectToCheckout(e,t,a){t&&t.redirectToCheckout({sessionId:e}).then(function(e){e.error&&a(e.error.message)})}function addParamToStripePayload(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=window)||void 0===e?void 0:e.Rewardful)&&(null===(a=window)||void 0===a?void 0:null===(t=a.Rewardful)||void 0===t?void 0:t.referral)?(0,r._)((0,s._)({},n),{clientReferenceId:window.Rewardful.referral}):n}},38606:function(e,t,a){a.d(t,{p:function(){return usePurchaseCredits}});var s=a(45610),r=a(9),n=a(50044),i=a(96974),l=a(2265);a(27106);var o=a(46095),d=a(4392),c=a(72319),u=a(25414),m=a(60453),f=a(76340),x=a(47635),h=a(27419),p=a(42146),g=a(79398);function usePurchaseCredits(){var e,t=(0,i.useStripe)(),a=(0,r._)((0,l.useState)(null),2),v=a[0],y=a[1],b=(0,u.useModal)().openModal,j=(0,r._)((0,l.useState)(!1),2),w=j[0],N=j[1],_=(0,c.mU)(),E=_.isSubscribed,S=_.planType,P=(0,d.aC)().currentUser,A=(0,f.Z)().notify,C=(0,g.z)().capture,I=(0,r._)((0,h.lT)(),1)[0],D=(0,r._)((0,p.pr)(),1)[0];return{purchaseCredits:(e=(0,s._)(function(e){var a,s,r,i,l;return(0,n.Jh)(this,function(n){switch(n.label){case 0:if(!P||!P.email)return y("User not authenticated"),[2];if(!E)return b(o.GY.BUY_CREDITS),[2];N(!0),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,D().unwrap()];case 2:return s=(null==(a=n.sent())?void 0:a.ip)||"",r=navigator.userAgent,i=window.tolt_referral||"",[4,I((0,x.q)({email:P.email,creditAmount:e,planType:S,toltReferral:i,userIpAddress:s,userAgent:r})).unwrap()];case 3:return"success"===(l=n.sent()).status?(C(o.Je.UX_PILOT_CREDIT_PACKAGE_PURCHASED,{user_id:P.id,user_email:P.email,credit_amount:e,plan_type:S,status:"checkout_started"}),(0,x.V)(l.sessionId,t,y)):(y(l.message||"Error purchasing credits"),A({message:"Unable to process purchase at the moment!",type:"error"})),[3,6];case 4:return console.error("Error purchasing credits:",n.sent()),y("An unexpected error occurred. Please try again."),A({message:"Unable to process purchase at the moment!",type:"error"}),[3,6];case 5:return N(!1),[7];case 6:return(0,m.hb)("credits:update"),[2]}})}),function(t){return e.apply(this,arguments)}),error:v,isPurchaseLoading:w}}}}]);